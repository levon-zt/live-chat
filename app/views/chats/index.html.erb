<div class="row h-100">
  <div class="col-2 border-end p-0">
    <% @users.each do |user| %>
      <div class="border-bottom p-2 <%= "bg-secondary bg-gradient text-white" if user.id == @selected_user_id %>">
        <div><%= user.username %></div>
        <div class="fs-12"><%= user.last_message_with(Current.user)[:message] %></div>
      </div>
    <% end %>
  </div>
  <div class="col-10">
    <div class="d-flex flex-column justify-content-between h-100">
      <div class="d-flex flex-column justify-content-end h-100 mb-2">
        <% @messages.each do |message| %>
          <div class="mb-2">
            <div class="d-flex justify-content-<%= message.chat_room_user.user_id == Current.user.id ? 'end' : 'start' %>">
              <div class="fs-12"><%= message.created_at.strftime("%I:%M %p") %></div>
            </div>
            <div class="d-flex justify-content-<%= message.chat_room_user.user_id == Current.user.id ? 'end' : 'start' %>">
              <div class="bg-white p-2 border rounded-<%= message.chat_room_user.user_id == Current.user.id ? 'start' : 'end' %>"><%= message.message %></div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="pb-3">
        <%= form_with do |form| %>
          <div class="input-group">
            <%= form.text_field :message, class: "form-control" %>
            <%= form.submit "Send", class: "btn btn-outline-secondary" %>
            <%= form.hidden_field :selected_user_id, value: @selected_user_id %>
            <%= form.hidden_field :chat_room_id, value: @chat_room == nil ? 0 : @chat_room.id %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>